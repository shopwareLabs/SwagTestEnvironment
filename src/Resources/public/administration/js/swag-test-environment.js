!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bundles/administration/",n(n.s="tIKo")}({"2wCU":function(e,t){e.exports='<sw-page>\n    <template slot="smart-bar-header">\n        <h2>{{ $tc(\'mail-catcher.general.title\') }}</h2>\n    </template>\n    <template slot="content">\n        <sw-entity-listing\n            v-if="items"\n            :items="items"\n            :columns="columns"\n            :isLoading="isLoading"\n            :repository="mailCatcherRepository"\n        >\n            <template slot="column-receiver" slot-scope="{ item }">\n                <span v-for="(element, index) in item.receiver">\n                    {{ element }} &lt;<a :href=\'`mailto:${index}`\'>{{ index }}</a>&gt;\n                </span>\n            </template>\n\n            <template slot="column-createdAt" slot-scope="{ item }">\n                {{ item.createdAt | date({hour: \'2-digit\', minute: \'2-digit\', second: \'2-digit\'}) }}\n            </template>\n\n            <template slot="detail-action" slot-scope="{ item }">\n                <sw-context-menu-item class="sw-entity-listing__context-menu-show-action" :routerLink="{ name: \'mail.catcher.detail\', params: { id: item.id } }">\n                    {{ $tc(\'mail-catcher.list.columns.action\') }}\n                </sw-context-menu-item>\n            </template>\n        </sw-entity-listing>\n    </template>\n\n    <sw-sidebar slot="sidebar">\n        <sw-sidebar-item\n            icon="default-arrow-360-left"\n            :title="$tc(\'mail-catcher.list.sidebar.refresh\')"\n            @click="onRefresh">\n        </sw-sidebar-item>\n\n        <sw-sidebar-item icon="default-action-filter"\n                         :title="$tc(\'mail-catcher.list.sidebar.filter\')">\n            <sw-text-field :label="$tc(\'mail-catcher.list.sidebar.filters.search\')" v-model="filter.term"></sw-text-field>\n\n            <sw-button\n                variant="ghost"\n                @click="resetFilter">\n                {{ $tc(\'mail-catcher.list.sidebar.filters.resetFilter\') }}\n            </sw-button>\n        </sw-sidebar-item>\n    </sw-sidebar>\n</sw-page>\n'},"5uIm":function(e,t){e.exports='<sw-page class="sw-mail-catcher-detail">\n    <template slot="smart-bar-header">\n        <h2 v-if="archive">{{ archive.subject }}</h2>\n    </template>\n\n    <template slot="content">\n        <sw-card-view v-if="archive">\n            <sw-card :title="$tc(\'mail-catcher.detail.metadata.title\')">\n                <sw-text-field :label="$tc(\'mail-catcher.detail.metadata.sentDate\')" :disabled="true" v-model="createdAtDate"></sw-text-field>\n                <sw-text-field :label="$tc(\'mail-catcher.detail.metadata.sender\')" :disabled="true" v-model="senderText"></sw-text-field>\n                <sw-text-field :label="$tc(\'mail-catcher.detail.metadata.receiver\')" :disabled="true" v-model="receiverText"></sw-text-field>\n                <sw-text-field :label="$tc(\'mail-catcher.detail.metadata.subject\')" :disabled="true" v-model="archive.subject"></sw-text-field>\n            </sw-card>\n            <sw-card :title="$tc(\'mail-catcher.detail.content.title\')">\n                <h4>HTML</h4>\n                <iframe :src="htmlText" sandbox frameborder="0"></iframe>\n                <h4>Plain</h4>\n\n                <iframe :src="plainText" sandbox frameborder="0"></iframe>\n            </sw-card>\n        </sw-card-view>\n    </template>\n</sw-page>\n'},"6LbQ":function(e,t,n){var r=n("HR2a");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("SZ7m").default)("772dffc9",r,!0,{})},GxGG:function(e,t,n){},HR2a:function(e,t,n){},Hvah:function(e,t,n){var r=n("GxGG");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("SZ7m").default)("d4ca6724",r,!0,{})},SZ7m:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i],o=a[0],c={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(c):n.push(r[o]={id:o,parts:[c]})}return n}n.r(t),n.d(t,"default",(function(){return h}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=i&&(document.head||document.getElementsByTagName("head")[0]),c=null,s=0,l=!1,u=function(){},d=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,i){l=n,d=i||{};var o=r(e,t);return m(o),function(t){for(var n=[],i=0;i<o.length;i++){var c=o[i];(s=a[c.id]).refs--,n.push(s)}t?m(o=r(e,t)):o=[];for(i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],r=a[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(g(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(g(n.parts[i]));a[n.id]={id:n.id,refs:1,parts:o}}}}function v(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function g(e){var t,n,r=document.querySelector("style["+f+'~="'+e.id+'"]');if(r){if(l)return u;r.parentNode.removeChild(r)}if(p){var i=s++;r=c||(c=v()),t=w.bind(null,r,i,!1),n=w.bind(null,r,i,!0)}else r=v(),t=x.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var b,y=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function w(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function x(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute(f,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},tIKo:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=Shopware.Classes.ApiService,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,r,s=c(l);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_action/code-editor";return i(this,l),s.call(this,e,t,n)}return t=l,(n=[{key:"getFiles",value:function(){var e="".concat(this.getApiBasePath(),"/files");return this.httpClient.get(e,{headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}},{key:"getFile",value:function(e){var t="".concat(this.getApiBasePath(),"/file");return this.httpClient.get(t,{params:{file:e},headers:this.getBasicHeaders()}).then((function(e){return e.data.content}))}},{key:"saveFile",value:function(e,t){var n="".concat(this.getApiBasePath(),"/file");return this.httpClient.put(n,{content:t},{params:{file:e},headers:this.getBasicHeaders()}).then((function(e){return u.handleResponse(e)}))}}])&&a(t.prototype,n),r&&a(t,r),l}(u),f=n("vcSJ"),p=n.n(f);function h(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){h(a,r,i,o,c,"next",e)}function c(e){h(a,r,i,o,c,"throw",e)}o(void 0)}))}}var v=Shopware,g=v.Component,b=v.Mixin;g.register("code-editor-index",{inject:["codeEditorApiService"],template:p.a,mixins:[b.getByName("notification")],shortcuts:{"SYSTEMKEY+S":"saveFile"},data:function(){return{selectedLogFile:null,files:[],fileContent:""}},created:function(){var e=this;return m(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.codeEditorApiService.getFiles();case 2:e.files=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{onFileSelected:function(){var e=this;return m(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fileContent="",t.next=3,e.codeEditorApiService.getFile(e.selectedLogFile);case 3:e.fileContent=t.sent;case 4:case"end":return t.stop()}}),t)})))()},saveFile:function(){var e=this;return m(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.selectedLogFile){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.codeEditorApiService.saveFile(e.selectedLogFile,e.fileContent);case 4:e.createNotificationSuccess({message:"File saved successfully"});case 5:case"end":return t.stop()}}),t)})))()}}}),Shopware.Module.register("code-editor",{type:"plugin",name:"code-editor.title",title:"code-editor.title",description:"",color:"#303A4F",icon:"default-device-dashboard",routes:{index:{component:"code-editor-index",path:"index"}},settingsItem:[{group:"plugins",to:"code.editor.index",icon:"default-action-settings",name:"code-editor.title"}]});var y=n("2wCU"),w=n.n(y),x=(n("Hvah"),Shopware),S=x.Component,C=x.Mixin,j=x.Utils,F=Shopware.Data.Criteria;S.register("mail-catcher-index",{template:w.a,inject:["repositoryFactory"],mixins:[C.getByName("listing")],metaInfo:function(){return{title:this.$createTitle()}},data:function(){return{page:1,limit:25,total:0,repository:null,items:null,isLoading:!0,filter:{salesChannelId:null,customerId:null,term:null}}},computed:{columns:function(){return[{property:"createdAt",dataIndex:"createdAt",label:"mail-catcher.list.columns.sentDate",primary:!0,routerLink:"mail.catcher.detail"},{property:"subject",dataIndex:"subject",label:"mail-catcher.list.columns.subject",allowResize:!0,routerLink:"mail.catcher.detail"},{property:"receiver",dataIndex:"receiver",label:"mail-catcher.list.columns.receiver",allowResize:!0}]},mailCatcherRepository:function(){return this.repositoryFactory.create("sw_mail_catcher")}},methods:{getList:function(){var e=this;this.isLoading=!0;var t=new F;return this.filter.term&&t.setTerm(this.filter.term),t.addSorting(F.sort("createdAt","DESC")),this.mailCatcherRepository.search(t,Shopware.Context.api).then((function(t){e.items=t,e.total=t.total,e.isLoading=!1}))},resetFilter:function(){this.filter={salesChannelId:null,customerId:null,term:null},this.getList()}},watch:{filter:{deep:!0,handler:j.debounce((function(){this.getList()}),400)}}});var L=n("5uIm"),R=n.n(L);n("6LbQ");Shopware.Component.register("mail-catcher-detail",{template:R.a,inject:["repositoryFactory"],data:function(){return{archive:null,isLoading:!1,isSuccessful:!1}},created:function(){var e=this;this.repository=this.repositoryFactory.create("sw_mail_catcher"),this.repository.get(this.$route.params.id,Shopware.Context.api).then((function(t){e.archive=t}))},computed:{createdAtDate:function(){var e=Shopware.State.getters.adminLocaleLanguage||"en";return new Intl.DateTimeFormat(e,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(this.archive.createdAt))},receiverText:function(){var e=this,t=[];return Object.keys(this.archive.receiver).forEach((function(n){t.push("".concat(e.archive.receiver[n]," <").concat(n,">"))})),t.join(",")},senderText:function(){var e=this,t=[];return Object.keys(this.archive.sender).forEach((function(n){t.push("".concat(e.archive.sender[n]," <").concat(n,">"))})),t.join(",")},htmlText:function(){return this.getContent(this.archive.htmlText)},plainText:function(){return this.getContent(this.archive.plainText)}},methods:{getContent:function(e){return"data:text/html;base64,"+btoa(unescape(encodeURIComponent(e.replace(/[\u00A0-\u2666]/g,(function(e){return"&#"+e.charCodeAt(0)+";"})))))}}}),Shopware.Module.register("mail-catcher",{type:"plugin",title:"mail-catcher.general.title",description:"mail-catcher.general.description",color:"#F88962",icon:"default-device-dashboard",routes:{index:{component:"mail-catcher-index",path:"index"},detail:{component:"mail-catcher-detail",path:"detail/:id",meta:{parentPath:"mail.catcher.index"}}},settingsItem:[{group:"plugins",to:"mail.catcher.index",icon:"default-device-dashboard",name:"mail-catcher.general.title"}]});var A=Shopware.Application;A.addServiceProvider("codeEditorApiService",(function(e){var t=A.getContainer("init");return new d(t.httpClient,e.loginService)}))},vcSJ:function(e,t){e.exports='<sw-page class="code-editor">\n    <template slot="content">\n        <sw-card-view>\n            <sw-card title="Code Editor">\n                <sw-alert variant="info">\n                    You can also use ALT+S to save the file\n                </sw-alert>\n\n                <label>Choose file:</label>\n                <sw-single-select\n                    :options="files"\n                    labelProperty="name"\n                    valueProperty="name"\n                    v-model="selectedLogFile"\n                    @change="onFileSelected"\n                ></sw-single-select>\n\n                <sw-code-editor :sanitizeInput="false" v-model="fileContent" v-if="fileContent"></sw-code-editor>\n\n                <sw-button variant="primary" @click="saveFile">Save file</sw-button>\n            </sw-card>\n        </sw-card-view>\n    </template>\n</sw-page>\n'}});